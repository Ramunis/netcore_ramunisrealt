@page
@model RamunisrealtNET.Views.Home.CalcModel
@{
}
<main>
    <br><div class="container">
    <h1 class="h2">Ипотечный калькулятор</h1>

    <div class="col-md-7 col-lg-8">
        <h4 class="mb-3">Рассчитайте платеж и переплату по кредиту</h4>
        <form class="needs-validation" validate>
            <div class="row g-3">

                <div class="col-12">
                    <label for="cena" class="form-label">Цена <span class="text-muted"></span></label>
                    <input type="number" class="form-control" id="cena" name="cena" placeholder="1000000">
                    <div class="invalid-feedback">
                        Please enter a valid email address for shipping updates.
                    </div>
                </div>

                <div class="col-12">
                    <label for="start" class="form-label">Первоначальный взнос</label>
                    <input type="number" class="form-control" id="start" name="start" placeholder="300000" required>
                    <div class="invalid-feedback">
                    </div>
                </div>

                <div class="col-sm-6">
                    <label for="term" class="form-label">Срок(лет)</label>
                    <input type="text" class="form-control" id="term" name="term" placeholder="10" value="" required>
                    <div class="invalid-feedback">
                        Valid first name is required.
                    </div>
                </div>

                <div class="col-sm-6">
                    <label for="bet" class="form-label">Ставка(%)</label>
                    <input type="text" class="form-control" id="bet" name="bet" placeholder="5" value="" required>
                    <div class="invalid-feedback">
                        Valid last name is required.
                    </div>
                </div>

            </div>

            <br><button class="btn btn-warning" type="button" onclick="presscalc()" name="bcalc">Расчитать</button>
        </form>
    </div>
    <script>

        function presscalc() {
            var c = document.getElementById('cena').value;
            var s = document.getElementById('start').value;
            var t = document.getElementById('term').value;
            var b = document.getElementById('bet').value;

            var monthbet = b / 12 / 100;

            var firts = 1 + monthbet;
            var end = t * 12;
            var commonbet = Math.pow(firts, end);
            var monthpay = c * monthbet * commonbet / (commonbet - 1);

            var perpart = c * monthbet;
            var mainpart = monthpay - perpart;

            var overpay = monthpay * (t * 12) - c;

            //alert(c+s+t+b);
            //document.getElementById('output').value = monthpay;
            alert("Платёж в месяц = " + monthpay + ";Переплата = " + overpay);
        }

    </script>
</div>
</main>
